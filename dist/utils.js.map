{"version":3,"sources":["../src/utils.js"],"names":["appEvents","hostname","window","location","http","postgRestHost","influxHost","tasklistHostName","camundaHost","camundaRestApi","post","url","line","Promise","resolve","reject","xhr","XMLHttpRequest","open","onreadystatechange","handleResponse","onerror","e","send","readyState","status","res","JSON","parse","responseText","statusText","get","alert","type","title","msg","emit","showModal","html","data","mClass","src","modalClass","model","sure","promise","then","ok","catch","error"],"mappings":"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","file":"utils.js","sourcesContent":["import { appEvents } from 'app/core/core'\n\nconst hostname = window.location.hostname\nconst http = \"http://\"\nexport const postgRestHost = http + hostname + ':5436/'\nexport const influxHost = http + hostname + ':8086/'\n\nlet tasklistHostName = hostname\nif (tasklistHostName === 'localhost') {\n  tasklistHostName = '127.0.0.1'\n}\nexport const camundaHost = http + tasklistHostName + ':8080/camunda/app/tasklist'\nexport const camundaRestApi = http + hostname + ':8080/engine-rest/'\n\nexport const post = (url, line) => {\n    return new Promise((resolve, reject) => {\n      var xhr = new XMLHttpRequest()\n      xhr.open('POST', url)\n      xhr.onreadystatechange = handleResponse\n      xhr.onerror = e => reject(e)\n      xhr.send(line)\n  \n      function handleResponse () {\n        if (xhr.readyState === 4) {\n          if (xhr.status === 200) {\n            // console.log('200');\n            var res = JSON.parse(xhr.responseText)\n            resolve(res)\n          } else if (xhr.status === 204) {\n            // console.log('204');\n            res = xhr.responseText\n            resolve(res)\n          } else {\n            reject(this.statusText)\n          }\n        }\n      }\n    })\n  }\n\nexport const get = url => {\n  return new Promise((resolve, reject) => {\n      var xhr = new XMLHttpRequest()\n      xhr.open('GET', url)\n      xhr.onreadystatechange = handleResponse\n      xhr.onerror = e => reject(e)\n      xhr.send()\n\n      function handleResponse () {\n      if (xhr.readyState === 4) {\n          if (xhr.status === 200) {\n            var res = JSON.parse(xhr.responseText)\n          resolve(res)\n          } else {\n            reject(this.statusText)            \n          }\n      }\n      }\n  })\n}\n\nexport const alert = (type, title, msg) => {\n    appEvents.emit('alert-' + type, [title, msg])\n}\n\nexport const showModal = (html, data, mClass) => {\n  appEvents.emit('show-modal', {\n    src: 'public/plugins/smart-factory-operator-order-mgt-table-panel/partials/' + html,\n    modalClass: mClass || 'confirm-modal',\n    model: data\n  })\n}\n\nexport const sure = promise => \n  promise\n  .then(data => ({ok: true, data}))\n  .catch(error => Promise.resolve({ok: false, error}));"]}